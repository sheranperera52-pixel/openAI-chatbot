<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>AI WhatsApp Demo</title>

<style>
*{box-sizing:border-box}
html,body{margin:0;height:100%;font-family:Arial;background:#ece5dd}
.app{height:100dvh;display:flex;flex-direction:column}

/* HEADER */
.header{background:#075e54;color:#fff;padding:14px;display:flex;justify-content:space-between;align-items:center}
.header-right span{margin-left:14px;cursor:pointer}

/* TOOLBAR */
.tool-bar{background:#e8f5f1;padding:6px 10px;display:flex;gap:16px}

/* SOCIAL */
.social-bar{background:#dff3ee;padding:6px;display:flex;gap:6px}
.social-btn{flex:1;border:none;border-radius:20px;padding:6px;font-size:16px;color:#fff}
.linkedin{background:#0a66c2}
.youtube{background:#ff0000}
.facebook{background:#1877f2}
.instagram{background:linear-gradient(45deg,#f58529,#dd2a7b,#8134af)}
.tiktok{background:#000}

/* CHAT */
.chat{flex:1;overflow-y:auto;padding:10px}
.msg{max-width:75%;margin:6px;padding:10px;border-radius:8px}
.user{background:#dcf8c6;margin-left:auto}
.bot{background:#fff}
.msg img{max-width:180px;width:100%;border-radius:10px}

/* INPUT */
.input-bar{background:#f0f0f0;padding:8px;display:flex;gap:8px}
.input-wrap{flex:1;background:#fff;border-radius:24px;display:flex;gap:10px;padding:6px 10px}
.input-wrap input{flex:1;border:none;outline:none}
.input-wrap button{border:none;background:none;font-size:20px}
.send-btn{width:48px;height:48px;border-radius:50%;border:none;background:#128c7e;color:#fff;font-size:20px}

/* FLOAT */
.fab{position:fixed;right:16px;top:50%;transform:translateY(-50%);
width:56px;height:56px;border-radius:50%;background:#25d366;color:#fff;
display:flex;align-items:center;justify-content:center;font-size:24px}

/* POPUPS */
.popup{position:fixed;inset:0;background:rgba(0,0,0,.4);display:none;
align-items:center;justify-content:center;z-index:999}
.popup-box{background:#fff;padding:14px;border-radius:14px;width:90%;max-width:420px}

/* SMART SETTINGS */
.smart-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.smart-btn{
  padding:12px;border:none;border-radius:10px;
  background:#f5f5f5;font-size:14px;cursor:pointer;text-align:left
}
.smart-btn small{display:block;font-size:11px;color:#555}
.smart-btn:hover{background:#e0f2f1}

/* CALENDAR */
.calendar-header{display:flex;justify-content:space-between;font-weight:bold;margin-bottom:10px}
.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
.calendar-grid div{padding:10px 0;text-align:center;border-radius:8px;background:#f5f5f5;cursor:pointer}
.calendar-grid .today{background:#25d366;color:#fff}
</style>
</head>

<body>

<div class="app">

<div class="header">
  <strong>WhatsApp</strong>
  <div class="header-right">
    <span onclick="openCamera()">ğŸ“¹</span>
    <span onclick="openDial()">ğŸ“</span>
    <span onclick="openGoogle()">ğŸ”</span>
    <span onclick="openSettings()">â‹®</span>
  </div>
</div>

<div class="tool-bar">
  <span onclick="openNote()">ğŸ“</span>
  <span onclick="openCalendar()">ğŸ“…</span>
  <span id="clock"></span>
</div>

<div class="social-bar">
  <button class="social-btn linkedin" onclick="openLink('https://linkedin.com')">in</button>
  <button class="social-btn youtube" onclick="openLink('https://youtube.com')">â–¶</button>
  <button class="social-btn facebook" onclick="openLink('https://facebook.com')">f</button>
  <button class="social-btn instagram" onclick="openLink('https://instagram.com')">ğŸ“¸</button>
  <button class="social-btn tiktok" onclick="openLink('https://tiktok.com')">â™ª</button>
</div>

<div class="chat" id="chat"></div>

<div class="input-bar">
  <input type="file" id="fileInput" accept="image/*" hidden>
  <div class="input-wrap">
    <button onclick="openEmoji()">ğŸ˜Š</button>
    <input id="text" placeholder="Type a message">
    <button onclick="fileInput.click()">ğŸ“</button>
  </div>
  <button class="send-btn" onclick="send()">â¤</button>
</div>
</div>

<div class="fab" onclick="text.focus()">ğŸ’¬</div>

<!-- NOTE -->
<div class="popup" id="notePopup">
  <div class="popup-box">
    <h3>ğŸ“ Notepad</h3>
    <textarea id="noteText" style="width:100%;height:150px"></textarea>
    <button onclick="saveNote()">ğŸ’¾ Save</button>
    <button onclick="closeAll()">Close</button>
  </div>
</div>

<!-- CALENDAR -->
<div class="popup" id="calendarPopup">
  <div class="popup-box">
    <h3>ğŸ“… Calendar</h3>
    <div id="calendar"></div>
    <button onclick="closeAll()">Close</button>
  </div>
</div>

<!-- CAMERA -->
<div class="popup" id="camPopup">
  <div class="popup-box">
    <video id="video" autoplay playsinline style="width:100%"></video>
    <button onclick="switchCam()">ğŸ”„ Switch</button>
    <button onclick="closeAll()">Close</button>
  </div>
</div>

<!-- SMART SETTINGS PANEL -->
<div class="popup" id="settingsPopup">
  <div class="popup-box">
    <h3>âš™ Smart Settings</h3>

    <div class="smart-grid">
      <button class="smart-btn" onclick="profile()">ğŸ‘¤ Profile<small>Edit name & photo</small></button>
      <button class="smart-btn" onclick="toggleDark()">ğŸŒ“ Dark Mode<small>Light / Dark</small></button>
      <button class="smart-btn" onclick="notify()">ğŸ”” Notifications<small>Mute alerts</small></button>
      <button class="smart-btn" onclick="language()">ğŸŒ Language<small>Change language</small></button>
      <button class="smart-btn" onclick="theme()">ğŸ¨ Theme<small>Accent color</small></button>
      <button class="smart-btn" onclick="ai()">ğŸ¤– AI Assistant<small>AI options</small></button>
      <button class="smart-btn" onclick="privacy()">ğŸ” Privacy<small>Lock & PIN</small></button>
      <button class="smart-btn" onclick="backup()">â˜ Backup<small>Cloud save</small></button>
      <button class="smart-btn" onclick="usage()">ğŸ“Š Usage<small>Daily stats</small></button>
      <button class="smart-btn" onclick="help()">â“ Help<small>Support</small></button>
    </div>

    <br>
    <button onclick="closeAll()">Close</button>
  </div>
</div>

<!-- EMOJI -->
<div class="popup" id="emojiPopup">
  <div class="popup-box">
    <div class="emoji-grid">ğŸ˜€ ğŸ˜ ğŸ˜‚ ğŸ¤£ ğŸ˜Š ğŸ˜ ğŸ˜ ğŸ˜¢ ğŸ˜­ ğŸ˜¡ ğŸ‘ â¤ï¸ ğŸ”¥ ğŸ‰</div>
    <button onclick="closeAll()">Close</button>
  </div>
</div>

<!-- DIAL -->
<div class="popup" id="dialPopup">
  <div class="popup-box">
    <h3>ğŸ“ Dial Pad</h3>
    <input style="width:100%;padding:10px" placeholder="Enter number">
    <button>Call</button>
    <button onclick="closeAll()">Close</button>
  </div>
</div>

<script>
const chat=document.getElementById("chat");
const text=document.getElementById("text");
const fileInput=document.getElementById("fileInput");
let stream=null,facing="user";

/* AI */
async function send(){
  const msg=text.value.trim();
  const file=fileInput.files[0];
  if(!msg && !file) return;
  if(msg) add(msg,"user");
  if(file) add(`<img src="${URL.createObjectURL(file)}">`,"user");
  const fd=new FormData();
  fd.append("message",msg);
  if(file) fd.append("file",file);
  text.value=""; fileInput.value="";
  try{
    const r=await fetch("/chat",{method:"POST",body:fd});
    const d=await r.json();
    if(d.reply) add(d.reply,"bot");
  }catch{add("âš  AI error","bot")}
}
function add(m,t){chat.innerHTML+=`<div class="msg ${t}">${m}</div>`;chat.scrollTop=chat.scrollHeight}

/* CALENDAR */
let calMonth=new Date().getMonth(),calYear=new Date().getFullYear();
function openCalendar(){calendarPopup.style.display="flex";renderCalendar()}
function renderCalendar(){
  calendar.innerHTML="";
  const h=document.createElement("div");
  h.className="calendar-header";
  h.innerHTML=`<button onclick="changeMonth(-1)">â—€</button>
  ${new Date(calYear,calMonth).toLocaleString("default",{month:"long"})} ${calYear}
  <button onclick="changeMonth(1)">â–¶</button>`;
  calendar.appendChild(h);
  const g=document.createElement("div");g.className="calendar-grid";
  const t=new Date(),days=new Date(calYear,calMonth+1,0).getDate();
  for(let i=1;i<=days;i++){
    const d=document.createElement("div");d.innerText=i;
    if(i===t.getDate()&&calMonth===t.getMonth()&&calYear===t.getFullYear())
      d.classList.add("today");
    g.appendChild(d);
  }
  calendar.appendChild(g);
}
function changeMonth(s){
  calMonth+=s;
  if(calMonth<0){calMonth=11;calYear--}
  if(calMonth>11){calMonth=0;calYear++}
  renderCalendar();
}

/* UTIL */
function openNote(){notePopup.style.display="flex"}
function saveNote(){
  const b=new Blob([noteText.value]);
  const a=document.createElement("a");
  a.href=URL.createObjectURL(b);a.download="note.txt";a.click();
}
async function openCamera(){
  camPopup.style.display="flex";
  if(stream) stream.getTracks().forEach(t=>t.stop());
  stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:facing}});
  video.srcObject=stream;
}
function switchCam(){facing=facing==="user"?"environment":"user";openCamera()}
function openEmoji(){emojiPopup.style.display="flex"}
function openSettings(){settingsPopup.style.display="flex"}
function openDial(){dialPopup.style.display="flex"}
function openGoogle(){window.open("https://google.com","_blank")}
function openLink(u){window.open(u,"_blank")}
function closeAll(){document.querySelectorAll(".popup").forEach(p=>p.style.display="none")}
function toggleDark(){
  document.body.style.background=
  document.body.style.background==="rgb(34, 34, 34)"?"#ece5dd":"#222";
}

/* SMART SETTINGS FUNCTIONS (BOUND) */
function profile(){alert("Profile settings")}
function notify(){alert("Notification settings")}
function language(){alert("Language settings")}
function theme(){alert("Theme settings")}
function ai(){alert("AI assistant settings")}
function privacy(){alert("Privacy & lock")}
function backup(){alert("Chat backup")}
function usage(){alert("Usage statistics")}
function help(){alert("Help & support")}

setInterval(()=>clock.innerText=new Date().toLocaleTimeString(),1000);
</script>

</body>
</html>
